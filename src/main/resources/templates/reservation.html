<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Réservation</title>
    <!--Police-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">
    <!--CSS-->
    <link rel="stylesheet" th:href="@{/css/navbar.css}"/>
    <link rel="stylesheet" href="../static/css/style.css" th:href="@{/style.css}"/>
    <!--Bootstrap-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <style>
        .custom-checkbox .custom-control-input:checked ~ .custom-control-label::before {
            background-color: #007bff;
        }
        .custom-control-label::before {
            width: 20px;
            height: 20px;
        }
        .custom-control-label::after {
            width: 20px;
            height: 20px;
        }

    </style>
</head>
<body>
<header th:replace="~{fragments/navbar :: navbar}"></header>

<form onsubmit="calculatePrice(event)">

    <div class="container my-4">
        <div class="row gy-2">
            <p class="h5 lead">Représentant Légal 1</p>
            <div class="col-sm-6">
                <input class="form-control" type="text" value="Grey"
                       aria-label="Disabled input example"
                       disabled
                       readonly>
            </div>
            <div class="col-sm-6">
                <input class="form-control" type="text" value="Marc"
                       aria-label="Disabled input example"
                       disabled
                       readonly>
            </div>
        </div>
    </div>
    <div class="container my-4">
        <div class="row gy-2">
            <p class="h5 lead">Représentant Légal 2</p>
            <div class="col-sm-6">
                <input class="form-control" type="text" value="Grey"
                       aria-label="Disabled input example" disabled
                       readonly>
            </div>
            <div class="col-sm-6">
                <input class="form-control" type="text" value="Mary"
                       aria-label="Disabled input example"
                       disabled
                       readonly>
            </div>
        </div>
    </div>
    <div class="container my-4">
        <div class="row gy-2">
            <div class="col-sm-6">
                <div class="form-text">Room name</div>
                <input class="form-control" type="text" th:value="${room.name}" aria-label="Disabled input example"
                       disabled
                       readonly>
            </div>
            <div class="col-sm-6">
                <div class="form-text">Prix</div>
                <input class="form-control" type="text" th:value="${room.price}"
                       aria-label="Disabled input example"
                       disabled
                       readonly>
            </div>
        </div>
    </div>
    <div class="container my-4">
        <div class="row gy-2">
            <div class="col-sm-6">
                <div class="form-text">Arrival date</div>
                <input class="form-control" type="date" id="arrivalDateInput" required>
            </div>
            <div class="col-sm-6">
                <div class="form-text">Departure date</div>
                <input class="form-control" type="date" id="departureDateInput" required>
            </div>
        </div>
    </div>


    <div class="container my-4">
        <div class="row gy-2">
            <div class="col-sm-6">
                <div class="form-text">Select a child</div>
                <select class="form-select" aria-label="Default select example" required>
                    <option selected>Child</option>
                    <option value="1">Tugdual</option>
                    <option value="2">Gwendolyne</option>
                    <option value="3">Gwenolé</option>
                </select>
            </div>
            <div class="col-sm-6">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="flexCheckDefault" required>
                    <label class="form-check-label" for="flexCheckDefault">
    <span>
    Je soussigné(e) Monsieur ou Madame </span>(Marc GREY) <span> représentant légal
    du mineur </span>(Tugdual GREY) <span>agissant en ma qualité de (père ou mère titulaire de l’autorité
    parentale ou tuteur légal) autorise ce(tte) dernier(ère) à séjourner seul(e) dans votre hôtel
    pour la période du (06/12/2023) au (10/12/2023).</span>
                    </label>
                </div>
            </div>
        </div>
    </div>

    <div class="container my-4">
        <div class="row">
            <div class="col">
                <label for="pieceidentité" class="form-label"></label>
                <input type="file" class="form-control" id="pieceidentité" aria-label="file example"
                       placeholder="piece d'identité" required>
                <div class="invalid-feedback">Example invalid form file feedback</div>
                <div class="form-text">Attestation de responsabilité civile</div>
            </div>
        </div>
    </div>
    <div class="card mb-3 d-flex align-items-stretch" style="max-width: 540px; margin: auto;">
        <div class="row g-0">
            <div class="col-md-4 d-flex align-items-center">
                <img th:src="@{/images/kidcab.png}" class="img-fluid rounded-start" style="object-fit: cover;" alt="Logo">
            </div>
            <div class="col-md-8 d-flex align-items-center">
                <div class="card-body d-flex align-items-center">
                    <div class="custom-control custom-checkbox">
                        <input type="checkbox" class="custom-control-input" id="customCheck1" style="transform: scale(1.5);">
                        <label class="custom-control-label" for="customCheck1">
                            Kidcab accompagne les enfants dans leur besoin de trajet quotidien en semaine, le week-end, mais aussi lors des vacances scolaires.
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="container my-4">
        <div class="row gy-2">
            <input type="hidden" id="roomPrice" th:value="${room.price}" />
            <div class="col-sm-6">
                <div class="form-text">Prix HT</div>
                <input class="form-control" type="text" id="priceHT" aria-label="Disabled input example" disabled readonly>
            </div>
            <div class="col-sm-6">
                <div class="form-text">Prix TTC</div>
                <input class="form-control" type="text" id="priceTTC" aria-label="Disabled input example" disabled readonly>
            </div>
        </div>
    </div>

    <div class="container my-4">
        <div class="row justify-content-center">
            <div class="col-12 col-md-6">
                <div class="mb-3 text-center">
                    <button class="btn btn-outline-primary" type="submit">Payer</button>
                </div>
            </div>
        </div>
    </div>

</form>
<script>
    // On écoute l'événement 'change' sur le champ de date de départ
    document.getElementById('departureDateInput').addEventListener('change', function() {
        const arrivalDate = new Date(document.getElementById('arrivalDateInput').value);
        const departureDate = new Date(this.value);

        // On vérifie que les deux dates sont valides
        if (!(arrivalDate instanceof Date && !isNaN(arrivalDate)) ||
            !(departureDate instanceof Date && !isNaN(departureDate))) {
            return;
        }

        // Calcul du nombre de jours entre la date d'arrivée et la date de départ
        const oneDay = 24 * 60 * 60 * 1000; // nombre de millisecondes en une journée
        const diffDays = Math.round(Math.abs((arrivalDate - departureDate) / oneDay));

        // On récupère le prix de la chambre
        const roomPrice = parseFloat(document.getElementById('roomPrice').value);
        if (isNaN(roomPrice)) {
            return;
        }

        // Calcul du prix HT et TTC
        const priceHT = roomPrice * diffDays;
        const priceTTC = priceHT * 1.2;

        // On affiche les prix calculés dans les champs correspondants
        document.getElementById('priceHT').value = priceHT.toFixed(2); // arrondi à 2 chiffres après la virgule
        document.getElementById('priceTTC').value = priceTTC.toFixed(2); // arrondi à 2 chiffres après la virgule
    });

</script>
<!--BootStrap-->
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.min.js"
        integrity="sha384-fbbOQedDUMZZ5KreZpsbe1LCZPVmfTnH7ois6mU1QK+m14rQ1l2bGBq41eYeM/fS"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js"></script>
<script th:src="@{/js/navbar.js}"></script>
<script src="../static/js/script.js" th:src="@{/script.js}" type="module"></script>
<footer th:replace="~{fragments/footer :: footer}"></footer>
</body>
</html>

